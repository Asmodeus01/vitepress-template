# 模型编辑器使用

::: tip
DCP-VIEW-3D旨在快速通过拖拽快速生成一个3D大屏.主要分为两个部分

* 模型编辑器:通过拖拽生成模型部分
* 2D页面编辑器:编辑页面的2D部分,如两侧的图表

不过模型与2D页面的交互需在导出到项目后,在项目内写逻辑

:::

![image-20230504204457754](http://120.26.146.64:19000/knowledge-base/image-20230504204457754.png)

# 模型编辑器主页面分为三大部分

1. 类型选择,分为四个类型:
   * 场景:模型渲染的场景,该为主要场景,相当于一个模型的页面,所有的模型都在此进行拼接
   * 模型:3D模型
   * 图标:页面的弹出框等2D覆盖物（与2D页面编辑器内的图标共享）
   * 资源:模型、图标处用到的静态资源（与2D页面编辑器内的资源共享）
2. 展示区域:
   * 上半部分:总览,可看到模型与图标在场景内的分布情况,并且可在俯视角进行位置修改
   * 下半部分:具体的页面展示,实时看到模型与图标在场景内的样子
3. 配置区域及图层:
   * 上半部分:主要为配置区域,针对场景、模型、图标和资源来进行不同的配置,若不选中具体的项视为调整场景,当点击具体的模型、图标和资源后可修改选中项的配置
   * 下半部分:分为图层和数据两类,**图层**部分可直观的看到该场景下分有哪些东西,并且可对其进行分组,方便批量操作;**数据**部分为该场景导出后的资源,不建议在此修改



## 新增模型

* 新增模型前需要先将资源导入,编辑器支持直接拖拽的方式,如视频(**若打不开可右键在新标签页播放**)

<video style="width:100%" src="http://120.26.146.64:19000/knowledge-base/%E6%8B%96%E6%8B%BD%E5%AF%BC%E5%85%A5%E8%B5%84%E6%BA%90.mov"></video>

* 新建模型文件并且关联上相应的资源(**若打不开可右键在新标签页播放**)

<video style="width:100%" src="http://120.26.146.64:19000/knowledge-base/%E6%96%B0%E5%BB%BA%E6%A8%A1%E5%9E%8B%E5%B9%B6%E4%B8%94%E5%AF%BC%E5%85%A5.mov"></video>

## 将模型与图标放入场景内

* 模型和图标都是拖拽至中间即可.(**若打不开可右键在新标签页播放**)

<video style="width:100%" src="http://120.26.146.64:19000/knowledge-base/%E8%B5%84%E6%BA%90%E6%8B%96%E5%85%A5.mov"></video>

# 配置区域介绍

## 场景配置

![image-20230505144922193](http://120.26.146.64:19000/knowledge-base/image-20230505144922193.png)


### 场景
* 相机:刚进来时视角的位置
* 目标:刚进来时页面中心点的位置
* 近端位置:近端位置
* 远端位置:远端位置
* 背景颜色:背景颜色
* 环境光贴图:环境光贴图
* 反序列化前:页面在所有元素生成完毕前的逻辑处理
  反序列化前回调函数有三个返参
  * json: 场景的所有信息,包括场景配置项
  * dm:场景的dataModel(数据容器),包括场景内的所有元素
  * view:场景的Graph3dView(3D渲染引擎组件类型)

![image-20230505153055989](http://120.26.146.64:19000/knowledge-base/image-20230505153055989.png)

* 反序列化后:页面在所有元素生成完毕后的逻辑处理

  反序列化后回调函数有四个返参

  * json: 场景的所有信息,包括场景配置项
  * dm:场景的dataModel,包括场景内的所有元素
  * view:场景的Graph3dView
  * datas:场景内的所有子元素

![image-20230505155308896](http://120.26.146.64:19000/knowledge-base/image-20230505155308896.png)

* 正交投影:影响视角从哪个视角观看,默认为无
![image-20230505160416952](http://120.26.146.64:19000/knowledge-base/image-20230505160416952.png)





#### 辉光

* 辉光:是否开启光线
* 强度:光线强度
* 半径:光线半径
* 阈值:光线阈值

#### 景深
* 景深:是否开启景深
* 孔径:景深孔径
* 图片:景深渲染的图片

#### 高亮
* 宽度:高亮的边框宽度
* 颜色:高亮的边框颜色
* 模式:高亮的触发的模式

![image-20230505161334131](http://120.26.146.64:19000/knowledge-base/image-20230505161334131.png)

#### 网格指导线

* 网格颜色:网格指导线颜色
* 网格线数:网格指导线线条数
* 网格间距:网格指导线每条之间的空隙

#### 阴影

* 启用:是否启用阴影
* X轴角度:X轴角度
* Y轴角度:y轴角度
* 强度:阴影强度
* 质量:阴影质量
* 柔化类型:阴影柔化程度
* bias偏移:阴影偏移程度

## 模型配置

![image-20230505170533859](http://120.26.146.64:19000/knowledge-base/image-20230505170533859.png)

### 基础

* 事件:模型各类事件触发后的回调(**必须勾选“可交互”按钮**)

  所有的事件回调函数都有三个返参

  * event: 点击的项信息,包括点击的位置
  * data:点击的模型相关信息(拓扑图元类型)
  * view:点击的模型相关信息(3D渲染引擎组件类型)

![image-20230505163407541](http://120.26.146.64:19000/knowledge-base/image-20230505163407541.png)

* 可交互:是否可交互(若要触发事件的回调则**必须勾选上**)
* 名称:模型的名称,便于寻找并作逻辑处理
* 标签:模型的标签,便于寻找并作逻辑处理
* 提示:提示该模型是什么
* 类型:该元素属于什么类型(**模型的话则显示源文件配置**)
* 可选中:是否可被选中
* 可移动:是否可被鼠标移动
* 可编辑:宽度、高度等是否可被修改
* 可见:是否隐藏
* 占位:是否仅仅是个占位符
* 缓存:渲染过一次后是否要进入缓存内
* 适配大小:是否根据页面适配大小
* 动态大小:是否根据周围实时变更大小
* 置顶:是否永远在最顶层
* 自动旋转:是否正面始终跟着视角变更

![image-20230505170305885](http://120.26.146.64:19000/knowledge-base/image-20230505170305885.png)

* 染色:给模型整体加上颜色
* 透明度:模型的透明度(**勾选“透明”时才有效**)
* 透明:模型是否透明
* 背裁切:是否启用背裁切
* 坐标归位:点击后回到场景的中心点

#### 立体线框

* 可见:展示立体线框的契机,默认为选中模型时

![image-20230505172009136](http://120.26.146.64:19000/knowledge-base/image-20230505172009136.png)

* 短线宽:是否切换为仅在点周围渲染线框
* 颜色:线框颜色
* 几何线框:是否展示模型的描边
* 四边面:是否切换为四边面
* 合并:根据策略将相应的线框进行合并,默认为不合并

![image-20230505172422497](http://120.26.146.64:19000/knowledge-base/image-20230505172422497.png)

#### 变换

* 旋转模式:根据什么规则进行旋转

![image-20230508104809303](http://120.26.146.64:19000/knowledge-base/image-20230508104809303.png)

* 角度:模型偏移的角度,X、Y、Z三轴都可调
* 位置:模型在场景上的位置,X、Y、Z三轴都可调
* 大小:模型的大小,X、Y、Z三轴都可调
* 锚点:模型的中心点,旋转都是根据中心点来进行旋转,X、Y、Z三轴都可调
* 缩放:模型放大缩小的倍数,,X、Y、Z三轴都可调

#### 阴影(需在场景内开启阴影)

* 投射阴影:是否可投射出阴影
* 接受阴影:其他模型投射出的阴影是否可以显示在该模型

